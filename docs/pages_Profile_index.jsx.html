<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/Profile/index.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/Profile/index.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect } from "react";
import SearchBar from "../../components/SearchBar";
import {
  ProfileContainer,
  MarginWrapper,
  AvatarImage,
  ButtonSettings,
} from "./Profile.styled";
//styles and icons
import { MarginBottomContainer } from "../../styles/Layout.styled";
import defaultprofile from "../../assets/images/defaultprofile.jpg";
import * as S from "../../styles/Text.styled";
import ArrowRightIcon from "@mui/icons-material/ArrowRight";
import ArrowDropUpIcon from "@mui/icons-material/ArrowDropUp";
import { useSelector } from "react-redux";
import { PrimaryButton } from "../../styles/Buttons.styled";
import SmoothCollapse from "react-smooth-collapse";
import { useState } from "react";
//settings components
import EditProfile from "../../components/Settings/EditProfile";
import MyVenues from "../../components/Settings/MyVenues";
import MyBookings from "../../components/Settings/MyBookings";
import CreateVenue from "../../components/Settings/CreateVenue";
import { profileApi } from "../../components/API/profile";
import { useDispatch } from "react-redux";
import { useNavigate } from "react-router-dom";
//auth-kit
import { useAuthUser, useSignOut } from "react-auth-kit";

/**
 * Profile component for displaying user profile information.
 *
 * @component
 * @returns {JSX.Element} The rendered Profile component with user options and information.
 */
function Profile() {
  const auth = useAuthUser();
  const dispatch = useDispatch();
  const state = useSelector((state) => state.profile);
  const navigate = useNavigate();
  console.log(state);
  const [showEditProfile, setShowEditProfile] = useState(false);
  const [showMyBookings, setShowMyBookings] = useState(false);
  const [showMyVenues, setShowMyVenues] = useState(false);
  const [showCreateVenue, setShowCreateVenue] = useState(false);
  const [isManager, setIsManager] = useState(false);

  /**
   * Handles the logout functionality by clearing the local storage and reloading the page.
   */
  const handleLogOut = () => {
    localStorage.clear();
    window.location.reload(false);
  };

  useEffect(() => {
    if (auth()) {
      console.log(auth().username);
      profileApi({
        username: auth().username,
        method: "GET",
        accessToken: auth().token,
        dispatch,
      });
    }
  }, []);

  const settings = [
    {
      name: "Edit profile",
      component: &lt;EditProfile />,
      show: showEditProfile,
      setShow: setShowEditProfile,
    },
    {
      name: "My bookings",
      component: &lt;MyBookings />,
      show: showMyBookings,
      setShow: setShowMyBookings,
    },
  ];
  const adminSettings = [
    {
      name: "Create a venue",
      component: &lt;CreateVenue />,
      show: showCreateVenue,
      setShow: setShowCreateVenue,
    },
    {
      name: "See my venues",
      component: &lt;MyVenues />,
      show: showMyVenues,
      setShow: setShowMyVenues,
    },
  ];

  useEffect(() => {
    console.log(state.profile.venueManager);
    if (state.profile.venueManager) {
      setIsManager(true);
    }
  }, [state]);

  return (
    &lt;MarginBottomContainer>
      &lt;ProfileContainer>
        &lt;MarginWrapper>
          &lt;div className="top-section-profile">
            &lt;div className="wrapper-profile-info">
              &lt;AvatarImage
                src={
                  state.profile.avatar ? state.profile.avatar : defaultprofile
                }
                onError={({ currentTarget }) => {
                  currentTarget.onerror = null;
                  currentTarget.src = defaultprofile;
                }}
              >&lt;/AvatarImage>
              &lt;div className="margin-left">
                &lt;S.TextWhite>{state.profile.name}&lt;/S.TextWhite>
                &lt;S.TextGrey>{state.profile.email}&lt;/S.TextGrey>
              &lt;/div>
            &lt;/div>
            &lt;PrimaryButton onClick={handleLogOut}>
              &lt;p>Log out&lt;/p>
            &lt;/PrimaryButton>
          &lt;/div>
        &lt;/MarginWrapper>
        {settings.map((ele) => {
          return (
            &lt;div key={ele.name}>
              {" "}
              &lt;ButtonSettings
                active={ele.show}
                key={ele.name}
                onClick={() => {
                  ele.setShow(!ele.show);
                }}
              >
                &lt;S.TextWhite>{ele.name}&lt;/S.TextWhite>
                {ele.show ? (
                  &lt;ArrowDropUpIcon className="arrow-icon" />
                ) : (
                  &lt;ArrowRightIcon className="arrow-icon" />
                )}
              &lt;/ButtonSettings>
              &lt;SmoothCollapse expanded={ele.show}>
                {ele.component}
              &lt;/SmoothCollapse>
            &lt;/div>
          );
        })}
        {isManager
          ? adminSettings.map((ele) => {
              return (
                &lt;div key={ele.name}>
                  {" "}
                  &lt;ButtonSettings
                    active={ele.show}
                    key={ele.name}
                    onClick={() => {
                      ele.setShow(!ele.show);
                    }}
                  >
                    &lt;S.TextWhite>{ele.name}&lt;/S.TextWhite>
                    {ele.show ? (
                      &lt;ArrowDropUpIcon className="arrow-icon" />
                    ) : (
                      &lt;ArrowRightIcon className="arrow-icon" />
                    )}
                  &lt;/ButtonSettings>
                  &lt;SmoothCollapse expanded={ele.show}>
                    {ele.component}
                  &lt;/SmoothCollapse>
                &lt;/div>
              );
            })
          : ""}
      &lt;/ProfileContainer>
    &lt;/MarginBottomContainer>
  );
}

export default Profile;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Profile">Profile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue May 30 2023 16:14:39 GMT+0200 (sentraleuropeisk sommertid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
